# [SQL-CRAFT: Text-to-SQL through Interactive Refinement and Enhanced   Reasoning](https://arxiv.org/abs/2402.14851)

## Write a very high-quality and detailed summary of the paper that describes the paper in a way that a human can fully understand. The summary should cover the problem, the proposed solution and highlight the main contributions of the paper.

 Here is a detailed summary of the paper:

This paper proposes SQL-CRAFT, a framework to enhance large language models' (LLMs) SQL generation capabilities through interactive refinement and enhanced reasoning. 

Problem:
Modern LLMs have become very powerful but still struggle with specialized tasks like translating natural language questions into SQL queries (Text-to-SQL). This is partly because SQL queries are scarce in the pre-training data for most LLMs. In contrast, programming languages like Python are much more prevalent, granting LLMs better reasoning abilities in Python over SQL.

Proposed Solution: 
The paper introduces two main strategies to improve LLMs' SQL generation:

1. Interactive Corrections (IC): Automatically correct the LLM's SQL response by iterating with the database to get feedback. If the execution result conflicts with common sense, guide the LLM to fix errors in the SQL (see Figure 1).

2. Python-Enhanced Reasoning: Incorporate Python in two ways - (i) generate Python first, then translate to SQL, (ii) generate Python and SQL simultaneously, enforcing Python reasoning chains. 

The paper combines these two ideas into an Interactive Correction Loop (IC-Loop) with Python-enhanced reasoning.

Main Contributions:

- Proposes the IC-Loop strategy to automatically refine LLMs' SQL generation using database feedback.

- Explores augmenting SQL generation with Python code blocks for enhanced reasoning.

- Achieves new state-of-the-art results on the Spider text-to-SQL benchmark, improving execution accuracy by 5.7% over naive prompting.

- Provides comprehensive analysis of 151 error cases, revealing issues with current SQL evaluation methods. Calls for better text-to-SQL evaluation protocols.

In summary, the paper presents an interactive refinement framework with Python reasoning to boost LLMs' SQL generation capabilities. Both the IC-Loop and Python integration strategies demonstrate effectiveness in improving SQL accuracy. The findings also highlight shortcomings of existing text-to-SQL evaluations.

# [Solving Oscillation Problem in Post-Training Quantization Through a   Theoretical Perspective](https://arxiv.org/abs/2303.11906)

## What is the central research question or hypothesis that this paper addresses?

Based on my reading of the paper, the central research question it addresses is:Why does the problem of loss oscillation occur in post-training quantization (PTQ) methods, how does it affect model accuracy, and how can it be solved? Specifically, the key points are:- The paper reveals an overlooked problem of loss oscillation during the reconstruction process in various PTQ methods, where the loss non-monotonically increases/decreases instead of monotonically increasing due to quantization error accumulation. - Through theoretical analysis, the paper proves that this oscillation is caused by differences in the capacities of adjacent modules in the network. - The loss oscillation results in larger reconstruction errors for certain modules, which negatively impacts overall model accuracy. The paper shows the final reconstruction error is correlated with the maximum error among previous modules.- To solve this, the paper proposes a Mixed REConstruction Granularity (MRECG) method to smooth the loss oscillation. It jointly optimizes capacities of adjacent modules with large differences, reducing the final reconstruction error.- MRECG optimizes module grouping based on capacity metrics under data-dependent and data-free scenarios. It shows consistent accuracy improvements when combined with different PTQ algorithms.In summary, the core hypothesis is that smoothing the overlooked loss oscillation issue in PTQ methods by optimizing module capacities can improve accuracy, which the paper proves both theoretically and empirically. MRECG is presented as an effective solution.


## What is the main contribution of this paper?

Based on my reading, the main contributions of this paper are:1. It reveals an oscillation problem in post-training quantization (PTQ) methods that has been overlooked before. The paper shows both theoretically and empirically that this oscillation is caused by differences in the capacities of adjacent modules. 2. To address the oscillation problem, the paper proposes a novel Mixed REConstruction Granularity (MRECG) method. This method employs either a loss metric or module capacity estimates to determine the optimal granularity for jointly optimizing modules during quantization. Smoothing out the oscillation improves final performance.3. The proposed MRECG method is shown to achieve state-of-the-art results across a range of models like ResNet and MobileNet quantized to different bit-widths. For example, it improves top-1 accuracy by 4.93% on a 2/4 bit MobileNetV2 compared to prior art.4. The paper also shows that increasing batch size for the calibration data used in PTQ helps reduce the approximation error in estimating the expectation. This further boosts accuracy, though with diminishing returns.In summary, the key innovation is identifying and addressing the overlooked oscillation problem in PTQ using the proposed MRECG method. Both theoretical analysis and empirical results demonstrate its effectiveness for various models and bit configurations.


## What is the TL;DR (Too Long, Didn't Read) version of the paper? If you had to summarize it in one sentence, what would that be?

Here is a one sentence summary of the key points in the paper:The paper reveals an oscillation problem in post-training quantization methods caused by differences in module capacity, and proposes a mixed reconstruction granularity approach to smooth out the oscillations by jointly optimizing modules with large capacity differences, leading to improved accuracy.

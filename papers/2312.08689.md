# [Safety-Critical Coordination of Legged Robots via Layered Controllers   and Forward Reachable Set based Control Barrier Functions](https://arxiv.org/abs/2312.08689)

## Write a very high-quality paragraph summarizing the paper that effectively covers the paper.

 Here is a summary paragraph of the key points from the paper:

This paper presents a method for the safety-critical coordination of legged robots operating in dynamic environments with moving obstacles. A three-layer control architecture is proposed, consisting of (1) a top-level safety-critical trajectory planner using control barrier functions (CBFs) and forward reachable sets to guarantee collision avoidance, (2) a middle-level model predictive controller using single rigid body dynamics to generate optimal desired ground reaction forces for tracking the safe trajectories, and (3) a low-level whole-body controller based on virtual constraints and quadratic programming to achieve the desired motions and forces. Both simulation and hardware experiments are presented with quadruped robots coordinating locomotion tasks among moving obstacles and agents, demonstrating the approach's ability to ensure safe trajectories while still achieving desired locomotion objectives. Key innovations include the use of high-order CBFs for second-order trajectory planning models and leveraging forward reachable sets for tighter safety constraints. The framework provides a method for multi-agent legged robot coordination with formal safety guarantees even in uncertain, dynamic environments.


## Write a very high-quality and detailed summary of the paper that describes the paper in a way that a human can fully understand. The summary should cover the problem, the proposed solution and highlight the main contributions of the paper.

 Here is a detailed summary of the paper:

Problem:
The paper addresses the challenge of safely coordinating teams of legged robots that need to locomote in dynamic environments with moving obstacles. Ensuring safe coordination of legged robots in such settings is difficult due to the high-dimensional, highly dynamic, and hybrid nature of legged locomotion. The key problems are: (1) generating coordination strategies that avoid collisions with moving obstacles and other robots, (2) tracking desired trajectories during locomotion while respecting safety constraints, and (3) implementing coordination controllers on high-DOF legged robots. 

Proposed Solution:
The paper proposes a layered control architecture with three components:

(1) A top-level safety-critical coordination planner that uses control barrier functions (CBFs) based on forward reachable sets to generate safe coordination trajectories for second-order models of the robots while avoiding moving obstacles.

(2) A middle-level model predictive control (MPC) planner that calculates optimal desired ground reaction forces (GRFs) using single rigid body (SRB) models to track the safe coordination trajectories from the top layer.

(3) A low-level whole-body controller that tracks the desired GRFs and safe trajectories using quadratic programming with virtual constraints and input-output linearization on the full dynamics models.

Key Contributions:

- A method to compute forward reachable sets and regions of potential collision for legged robots in dynamic environments. This is used to formulate control barrier functions that ensure safety during coordination.

- A layered architecture and algorithms that achieve safe coordinated locomotion by bridging trajectory optimization, GRF planning, and whole-body control with different model abstractions.  

- Experimental validation in both simulation and on hardware with quadruped robots coordinating locomotion tasks with moving obstacles and other robots, while successfully avoiding collisions.

The main impact is a framework for safe coordination of teams of legged robots in dynamic environments, which has not been sufficiently addressed in prior legged robotics literature. The layered methodology also connects high-level planning with low-level control.

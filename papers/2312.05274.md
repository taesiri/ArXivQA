# [Target to Source: Guidance-Based Diffusion Model for Test-Time   Adaptation](https://arxiv.org/abs/2312.05274)

## Write a very high-quality and detailed summary of the paper that describes the paper in a way that a human can fully understand. The summary should cover the problem, the proposed solution and highlight the main contributions of the paper.

 Here is a detailed summary of the paper:

Problem:
Test-time adaptation (TTA) methods aim to alleviate the domain shift problem where the test data distribution is different from the training data distribution. Mainstream TTA methods (source-to-target) fine-tune the source classifier on the test data, which can cause catastrophic forgetting. Recently proposed target-to-source methods use a diffusion model to map test data back to the source domain, avoiding fine-tuning. However, these methods suffer from:
1) Semantic information loss during mapping caused by data distribution shift between source and target domains. 
2) Model shift between the pretrained diffusion model and classifier.
These limitations result in performance lagging behind source-to-target methods.

Proposed Solution:
This paper proposes a Guidance-Based Diffusion-Driven Adaptation (GDDA) method to address the above weaknesses. GDDA uses three guidance strategies:
1) Detail guidance based on patch-wise contrastive loss to retain details and common semantics between test and source data.
2) Global guidance based on MSE loss to retain global styles and structures.  
3) Classifier-aware guidance based on LPIPS distance between feature maps to reduce model shift.
Additionally, a sampling strategy is used to decide when to start guidance based on image noise levels.

Main Contributions:
- Proposes GDDA, a guidance-based diffusion model for test-time adaptation that addresses semantic information loss and model shift limitations.
- Achieves state-of-the-art results compared to prior target-to-source methods, reducing the performance gap with source-to-target methods.  
- Demonstrates potential of guidance-based diffusion models for test-time domain adaptation tasks.
- Provides additional findings related to sensitivity of sampling methods to guidance gradients and limitations for blurring corruptions.

In summary, this paper makes significant contributions towards improving target-to-source based test-time adaptation using guidance strategies with diffusion models to address semantic loss and model shift weaknesses. The proposed GDDA method achieves superior performance over prior arts.
